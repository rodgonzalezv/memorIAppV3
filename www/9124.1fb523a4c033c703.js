"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9124],{9124:(L,h,a)=>{a.r(h),a.d(h,{ListaMemorialesPageModule:()=>A});var f=a(6814),b=a(95),n=a(3582),g=a(9862),l=a(3912),c=a(5861),y=a(2096),m=a(9397),d=a(6306),o=a(6689);const u="https://sumativa2.onrender.com/api/productos",Z={headers:new g.WM({"Content-Type":"application/json"})};let M=(()=>{class r{constructor(t){this.http=t}handleError(t="operation",e){return i=>(console.error("handleError datos de la api externa",i),(0,y.of)(e))}getMemoriales(){return console.log("apiMemoriales ()"),this.http.get(u).pipe((0,m.b)(t=>console.log("traer memoriales")),(0,d.K)(this.handleError("getMemoriales",[])))}getMemorial(t){return console.log("getMemorial idProducto x:"+t),this.http.get(u+"/"+t).pipe((0,m.b)(e=>console.log("fetched product id=${codigo}")),(0,d.K)(this.handleError("getMemorial id=${codigo}")))}borrarMemorial(t){return this.http.delete(u+"/"+t,Z).pipe((0,m.b)(e=>console.log("borrar memorial id=${idProducto}")),(0,d.K)(this.handleError("deleteMemorial")))}actualizarMemorial(t,e){return this.http.put(u+"/"+t,e,Z).pipe((0,m.b)(i=>console.log("memorial actualizado id=${idProducto}")),(0,d.K)(this.handleError("actualizarMemorial")))}static#o=this.\u0275fac=function(e){return new(e||r)(o.LFG(g.eN))};static#t=this.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var v=a(4414);const x=function(r){return["/ver-memorial",r]},C=function(r){return["/actualizar-memorial",r]};function T(r,U){if(1&r){const t=o.EpF();o.TgZ(0,"ion-item"),o._UZ(1,"ion-icon",8),o.TgZ(2,"ion-label"),o._uU(3),o.qZA(),o.TgZ(4,"ion-label"),o._uU(5),o.qZA(),o.TgZ(6,"ion-label"),o._uU(7),o.qZA(),o.TgZ(8,"ion-button",9),o._UZ(9,"ion-icon",10),o.qZA(),o._UZ(10,"br"),o.TgZ(11,"ion-button",9),o._UZ(12,"ion-icon",11),o.qZA(),o.TgZ(13,"ion-button",12),o.NdJ("click",function(){const s=o.CHM(t).$implicit,p=o.oxw();return o.KtG(p.borrarMemorial(s.idProducto))}),o._UZ(14,"ion-icon",13),o.qZA()()}if(2&r){const t=U.$implicit;o.xp6(3),o.AsE("",t.idProducto," - ",t.nombreprod,""),o.xp6(2),o.Oqu(t.cantidad),o.xp6(2),o.Oqu(t.fCreacion),o.xp6(1),o.Q6J("routerLink",o.VKq(6,x,t.idProducto)),o.xp6(3),o.Q6J("routerLink",o.VKq(8,C,t.idProducto))}}const E=[{path:"",component:(()=>{class r{constructor(t,e,i,s,p){this.restApi=t,this.loadingController=e,this.alertController=i,this.route=s,this.router=p,this.memoriales=[]}ngOnInit(){this.getMemoriales()}getMemoriales(){var t=this;return(0,c.Z)(function*(){console.log("Entrando :getMemoriales");const e=yield t.loadingController.create({message:"Cargando..."});yield e.present(),console.log("Entrando :"),yield t.restApi.getMemoriales().subscribe({next:i=>{console.log("Res:"+i),t.memoriales=i,console.log("memoriales:",t.memoriales),e.dismiss()},complete:()=>{},error:i=>{console.log("Err:"+i),e.dismiss()}})})()}borrarMemorial(t){var e=this;return(0,c.Z)(function*(){e.alertaConfirmacion(t,"Esta seguro que desea eliminar este Memorial")})()}alertaConfirmacion(t,e){var i=this;return(0,c.Z)(function*(){yield(yield i.alertController.create({header:"Borrar Memorial!",message:e,buttons:[{text:"Cancelar",role:"cancel",handler:()=>{console.log("Operaci\xf3n cancelada")}},{text:"Eliminar",handler:()=>{i.confirmacionBorrado(t)}}]})).present()})()}confirmacionBorrado(t){var e=this;return(0,c.Z)(function*(){alert("Eliminando ");const i=yield e.loadingController.create({message:"Loading..."});yield i.present(),yield e.restApi.borrarMemorial(t).subscribe({next:s=>{console.log("Error",s),i.dismiss(),e.router.navigate(["lista-memoriales"]),window.location.reload()},complete:()=>{},error:s=>{console.log("Error",s),i.dismiss()}})})()}static#o=this.\u0275fac=function(e){return new(e||r)(o.Y36(M),o.Y36(v.HT),o.Y36(v.Br),o.Y36(l.gz),o.Y36(l.F0))};static#t=this.\u0275cmp=o.Xpm({type:r,selectors:[["app-lista-memoriales"]],features:[o._Bn([M])],decls:13,vars:1,consts:[[1,"background-image"],["slot","start"],["src","../../assets/logo.png",2,"display","block","margin","0 auto","width","200px"],["slot","end"],["defaultHref","/"],[2,"padding","10px"],["padding",""],[4,"ngFor","ngForOf"],["name","star","slot","start"],[3,"routerLink"],["name","eye-outline"],["name","create-outline"],["type","button",3,"click"],["name","trash-outline"]],template:function(e,i){1&e&&(o.TgZ(0,"ion-header")(1,"ion-toolbar"),o._UZ(2,"div",0),o.TgZ(3,"ion-buttons",1),o._UZ(4,"ion-menu-button"),o.qZA(),o._UZ(5,"ion-img",2),o.TgZ(6,"ion-buttons",3),o._UZ(7,"ion-back-button",4),o.qZA()()(),o.TgZ(8,"ion-content"),o._UZ(9,"div",0),o.TgZ(10,"ion-card",5)(11,"ion-list",6),o.YNc(12,T,15,10,"ion-item",7),o.qZA()()()),2&e&&(o.xp6(12),o.Q6J("ngForOf",i.memoriales))},dependencies:[f.sg,n.YG,n.Sm,n.PM,n.W2,n.Gu,n.gu,n.Xz,n.Ie,n.Q$,n.q_,n.fG,n.sr,n.oU,n.YI,l.rH],styles:["ion-img[_ngcontent-%COMP%]{width:200px;padding:10px}"]})}return r})()}];let P=(()=>{class r{static#o=this.\u0275fac=function(e){return new(e||r)};static#t=this.\u0275mod=o.oAB({type:r});static#e=this.\u0275inj=o.cJS({imports:[l.Bz.forChild(E),l.Bz]})}return r})(),A=(()=>{class r{static#o=this.\u0275fac=function(e){return new(e||r)};static#t=this.\u0275mod=o.oAB({type:r});static#e=this.\u0275inj=o.cJS({imports:[f.ez,b.u5,n.Pc,P,g.JF]})}return r})()}}]);